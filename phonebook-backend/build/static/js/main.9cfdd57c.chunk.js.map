{"version":3,"sources":["components/persons.js","components/App.js","index.js"],"names":["baseUrl","axios","get","newPerson","post","id","put","delete","Filter","searchString","handleSearchString","value","onChange","PersonForm","addData","newName","newNumber","handleNewName","handleNewNumber","onSubmit","type","Person","name","number","deletePrompt","onClick","AddNotification","message","className","ErrorNotification","App","useState","persons","setPersons","setNewName","setNewNumber","filterNumbers","setFilterNumbers","setSearchString","addMessage","setAddMessage","errorMessage","setErrorMessage","useEffect","personService","then","response","data","length","personsToShow","filter","person","toLowerCase","includes","event","console","log","target","preventDefault","nameObject","alreadyInPersons","i","window","confirm","idToUpdate","find","map","catch","error","check","setTimeout","concat","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9cfdd57c.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAllPersons = () => {\n    return axios.get(baseUrl)\n}\n\nconst addPerson = newPerson => {\n    return axios.post(baseUrl, newPerson)\n}\n\nconst update = (id, newPerson) => {\n    return axios.put(`${baseUrl}/${id}`, newPerson)\n}\n        \nconst deletePerson = (id) => {\n    axios.delete(`${baseUrl}/${id}`)\n}\n\nexport default {getAllPersons, addPerson, update, deletePerson}\n        ","import React, { useState, useEffect } from 'react'\nimport personService from './persons'\nimport '../index.css'\n\nconst Filter = ({searchString, handleSearchString}) => (\n  <form>\n    <div>\n      filter shown with <input value={searchString} onChange={handleSearchString}/>\n    </div>\n  </form>\n)\n\nconst PersonForm = ({addData, newName, newNumber, handleNewName, handleNewNumber}) => (\n    <form onSubmit={addData}>\n      <div>\n        name: <input value={newName} onChange={handleNewName}/>\n      </div>\n      <div>\n        number: <input value={newNumber} onChange={handleNewNumber}/>\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n)\n\nconst Person = ({name, number, deletePrompt}) => (\n  <li>{name} {number} <button onClick={deletePrompt}>delete</button></li>\n)\n\nconst AddNotification = ({message}) => {\n   if (message === null) {\n     return null\n   }\n\n   return (\n     <div className=\"add\">\n       {message}\n     </div>\n   )\n}\n\nconst ErrorNotification = ({message}) => {\n   if (message === null) {\n     return null\n   }\n\n   return (\n     <div className=\"error\">\n       {message}\n     </div>\n   )\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filterNumbers, setFilterNumbers] = useState(false)\n  const [searchString, setSearchString] = useState('')\n  const [addMessage, setAddMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    // console.log('effect')\n    personService\n      .getAllPersons()\n      .then(response => {\n        setPersons(response.data)\n      })\n  }, [])\n\n  useEffect(() => {\n    searchString.length === 0 ? setFilterNumbers(false) : setFilterNumbers(true)\n  },[searchString])\n\n  const addData = (event) => {\n    event.preventDefault()\n    const nameObject = {\n      name: newName,\n      number: newNumber,\n    }\n\n    // can't compare objects directly in JS!!!\n    // can use JSON.stringify if you really want to use includes/some methods\n\n    let alreadyInPersons = false\n    for (let i = 0 ; i < persons.length ; i++) {      \n      if (nameObject.name === persons[i].name) {\n        alreadyInPersons = true\n      }\n    }\n\n    if (!alreadyInPersons) {\n      personService\n        .addPerson(nameObject)\n        .then(response => {setPersons(persons.concat(response.data))})\n        .then(() => {\n          setAddMessage(`Added ${nameObject.name}`)\n          setTimeout(() => {\n            setAddMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          let check = 0\n          for (let i = 0 ; i < nameObject.number.length ; i++) {\n            if (nameObject.number[i] >= '0' && nameObject.number[i] <= '9') {\n              check++\n            }\n          }\n          console.log(\"a check: \", check)\n          if (nameObject.name.length < 3 && check < 8) {\n            setErrorMessage(\"name is shorter than min length of 3, number must have at least 8 digits\")\n          } else if (nameObject.name.length < 3) {\n            setErrorMessage(`Person validation failed: name: ${nameObject.name} is shorter than the minimum allowed length (3)`)\n          } else if (check < 8) {\n            setErrorMessage(`${nameObject.name}'s number: ${nameObject.number} has fewer than the min allowed number of digits (8)`)\n          }\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n          console.log(error.response.data)\n        })\n    } else {\n      if (window.confirm(`${nameObject.name} is already added to phonebook. Replace the old number with a new one?`)) {\n        // console.log(persons);\n        const idToUpdate = persons.find(person => person.name === nameObject.name).id\n        // console.log(idToUpdate);\n        personService.update(idToUpdate, nameObject)\n          .then(response => {\n            // console.log(response.data);\n            setPersons(persons\n              .map(person => person.id === idToUpdate ? response.data : person))\n          })\n          .catch(error => {\n            let check = 0\n            for (let i = 0 ; i < nameObject.number.length ; i++) {\n              if (nameObject.number[i] >= '0' && nameObject.number[i] <= '9') {\n                check++\n              }\n            }\n            // console.log(check)\n            if (nameObject.name.length < 3 && check < 8) {\n              setErrorMessage(\"name is shorter than min length of 3, number must have at least 8 digits\")\n            } else if (nameObject.name.length < 3) {\n              setErrorMessage(`Person validation failed: name: ${nameObject.name} is shorter than the minimum allowed length (3)`)\n            } else if (check < 8) {\n              setErrorMessage(`${nameObject.name}'s number: ${nameObject.number} has fewer than the min allowed number of digits (8)`)\n            } else {\n              setErrorMessage( `Information of ${nameObject.name} has already been removed from server`)\n            }\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n            // console.log(error)\n          })\n      }\n    }\n\n    setNewName('')\n    setNewNumber('')\n  }\n  \n  const handleNewName = (event) => {\n    // console.log(event.target.value);\n    setNewName(event.target.value)\n  }\n  \n  const handleNewNumber = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleSearchString = (event) => {\n    console.log(event.target.value);\n    setSearchString(event.target.value)\n    // searchString.length === 0 ? setFilterNumbers(false) : setFilterNumbers(true)\n    console.log(searchString.length)\n    console.log(filterNumbers)\n    // console.log(\"persons to show\", personsToShow);\n  }\n  \n  const deletePrompt = (id, name) => {\n    // console.log(person)\n    if (window.confirm(`Delete ${name} ?`)) {\n      personService.deletePerson(id)\n      setPersons(persons.filter(person => person.id !== id))\n    }\n\n  }\n  const personsToShow = filterNumbers \n    ? persons.filter(person => person.name.toLowerCase().includes(searchString))\n    : persons \n  \n  // be aware that var on left of equals (eg. searchString) is the prop var\n  // and the value it is being set to is the searchString in App component\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <AddNotification message={addMessage}/>\n      <ErrorNotification message={errorMessage}/>\n      <Filter searchString={searchString} handleSearchString={handleSearchString}/>\n      <h2>add a new</h2>\n      <PersonForm \n        addData={addData}\n        newName={newName}\n        newNumber={newNumber}\n        handleNewName={handleNewName}\n        handleNewNumber={handleNewNumber}\n      />\n      <h2>Numbers</h2>\n      <div>\n        <ul>\n          {personsToShow.map((person, i) =>\n            <Person \n            key={i}\n            name={person.name}\n            number={person.number} \n            deletePrompt={() => deletePrompt(person.id, person.name)}\n          />\n          )}\n        </ul>\n      </div>\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from'./components/App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}